{% extends "base_course.html" %}

{% block course_content %}
    <section class="block">
        <h2 class="title is-2">{{ course.name }}</h2>
        <p class="subtitle"><strong>教师:</strong> {{ course.get_teachers }}</p>
        <p class="columns">
            <span class="column"><strong>课程类别:</strong> {{ course.get_classification_display }}</span>
            <span class="column"><strong>开课院系:</strong> {{ course.school }}</span>
        </p>

        <h3 class="subtitle">
            <span>
                <strong>总体评价:</strong>
                {% if rating %}
                    {{ rating | floatformat }} / 5
                {% else %}
                    暂无评分
                {% endif %}
            </span>
            <span class="fs-6">({{ reviews.count }} 人评价)</span>
        </h3>
        <p class="columns">
            <span class="column">
                课程难度: {{ difficulty }}
            </span>
            <span class="column">
                给分高低: {{ grade }}
            </span>
            <span class="column">
                作业多少: {{ homework }}
            </span>
            <span class="column">
                收获多少: {{ reward }}
            </span>
        </p>
    </section>

    <div class="level">
        <h2 class="level-left title is-3">评价列表</h2>
        <a class="level-right button is-dark" href="/course/{{ course.id }}/review_add/">
            新增评价
        </a>
    </div>

    {% for review in reviews %}
        <div class="box">
            <p class="subtitle">
                <span>
                    {% if review.created_by.nickname %}
                        <td>{{ review.created_by.nickname }}</td>
                    {% else %}
                        <td>匿名</td>
                    {% endif %}
                </span>
                <span class="ml-5">
                    {{ review.rating }} 分
                </span>
            </p>
            <p>
                {{ review.content }}
            </p>
            <p class="is-size-7">
                {{ review.created_time }}
            </p>
        </div>
    {% endfor %}

{% endblock %}
